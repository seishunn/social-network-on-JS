"use strict";(self.webpackChunksoc_net=self.webpackChunksoc_net||[]).push([[847],{7193:function(e,s,a){a.d(s,{D:function(){return g}});var i=a(8683),r=a(5671),n=a(3144),d=a(136),t=a(516),l=a(2791),o=a(8687),u=a(7689),c=a(184),m=function(e){return{isAuth:e.auth.isAuth}},g=function(e){var s=function(s){(0,d.Z)(l,s);var a=(0,t.Z)(l);function l(){return(0,r.Z)(this,l),a.apply(this,arguments)}return(0,n.Z)(l,[{key:"render",value:function(){return this.props.isAuth?(0,c.jsx)(e,(0,i.Z)({},this.props)):(0,c.jsx)(u.Fg,{to:"/login"})}}]),l}(l.Component);return(0,o.$j)(m,{})(s)}},250:function(e,s,a){a.d(s,{N:function(){return m}});var i="AddItemArea_addItemInput__PqZC7",r="AddItemArea_scrollBar__gj14p",n="AddItemArea_textArea__NmFNC",d="AddItemArea_btnAdd__-WEpj",t=a(6139),l=a(5304),o=a(8005),u=a(184),c=(0,l.D)(100),m=function(e){var s;return(0,u.jsx)("div",{className:i,children:(0,u.jsxs)("div",{className:r,children:[(0,u.jsx)("div",{className:n,children:(0,u.jsx)(t.Z,{validate:[l.C,c],component:o.g,name:e.name,placeholder:e.userName?"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c @".concat(null!==(s=e.userName)&&void 0!==s?s:"User"):"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0441\u0442",value:e.value})}),(0,u.jsx)("button",{className:d,children:(0,u.jsx)("div",{children:"+"})})]})})}},3847:function(e,s,a){a.r(s),a.d(s,{default:function(){return ae}});var i=a(8683),r=a(4165),n=a(5861),d=a(5671),t=a(3144),l=a(136),o=a(516),u=a(8687),c="Dialogs_dialogsPage__nfQF1",m="Dialogs_dialogsSideBar__y3cBA",g="Dialogs_messagesPage__3alZS",_="Dialogs_visibleDialogsSideBar__TPZXk",h="Dialogs_hiddenDialogsSideBar__1+Ejm",v="Dialogs_hiddenMessagePage__o4D4P",p="Dialogs_visibleMessagePage__ESUsy",x=a(5987),j={dialogsScroller:"DialogItems_dialogsScroller__bxX4g",dialogs:"DialogItems_dialogs__VQyG7"},f=a(184),N=["dialogs"],I=function(e){var s=e.dialogs;(0,x.Z)(e,N);return(0,f.jsxs)("div",{className:j.dialogsScroller,children:[(0,f.jsx)("div",{className:j.newMessage,children:"\u041b\u0438\u0447\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}),(0,f.jsx)("ul",{className:j.dialogs,children:s})]})},D="Dialog_dialog__41daL",A="Dialog_active__BQyrg",Z="Dialog_avatar__BQlz+",U="Dialog_name__JaQwe",M=a(1087),k=a(4352),y=["isActive"],P=function(e){var s="/dialogs/".concat(e.id);return(0,f.jsxs)(M.OL,{to:s,className:function(e){var s=e.isActive;(0,x.Z)(e,y);return s?"".concat(D," ").concat(A):D},children:[(0,f.jsx)("div",{className:Z,children:(0,f.jsx)("img",{src:e.photos.small||e.photos.large||k,alt:""})}),(0,f.jsx)("div",{className:U,children:e.userName})]})},T=a(2807),B="Messages_messages__GKcw8",F=a(8708),C=["messages"],S=function(e){var s=e.messages,a=(0,x.Z)(e,C),i=s.map((function(e,s,i){var r=a.authId===e.senderId?a.authAvatar:a.userAvatar;return 0===s?(0,f.jsx)(F.J,{avatar:r||k,message:e.message,name:e.name,addedDate:e.addedDate},e.id):i[s-1].senderId===e.senderId?(0,f.jsx)(F.J,{message:e.message,noUser:!0,name:e.name,addedDate:e.addedDate},e.id):(0,f.jsx)(F.J,{avatar:r||k,message:e.message,name:e.name,addedDate:e.addedDate},e.id)}));return(0,f.jsx)("ul",{children:i})},w="MessagesUserBar_userName__BNaux",b="MessagesUserBar_messagePreName__kw+e+",J="MessagesUserBar_messageName__D-0CU",E="MessagesUserBar_messageAka__X3e0o",L="MessagesUserBar_navAka__gfC5d",Q=function(e){return(0,f.jsxs)("div",{className:w,children:[(0,f.jsx)("div",{className:b,children:"@"}),(0,f.jsx)("div",{className:J,children:e.fullName}),(0,f.jsx)("div",{className:E,children:"AKA"}),(0,f.jsx)(M.OL,{to:"/profile/".concat(e.userId),className:L,children:e.fullName})]})},X=a(250),G=a(704),V=a(493),W=(0,G.Z)({form:"dialog"})((function(e){var s;return(0,f.jsx)("form",{onSubmit:e.handleSubmit((function(s){var a={authId:e.authId,userId:e.userId,name:e.senderName};e.sendMessageToUser(a,s.message),s.message=""})),children:(0,f.jsx)(X.N,{userName:null!==(s=e.userName)&&void 0!==s?s:"User",senderName:e.senderName,name:"message",authId:e.authId,userId:e.userId})})})),$=(0,u.$j)((function(e){return{messages:e.dialogsPage.messages,dialog:e.dialogsPage.dialog,authId:e.auth.id,profile:e.profilePage.profile,messagesIsFetching:e.dialogsPage.messagesIsFetching}}),{addItemAction:T.kJ,sendMessageToUser:T.F7})((function(e){var s,a,i,r,n,d,t,l,o,u,c;return(0,f.jsxs)(f.Fragment,{children:[e.messagesIsFetching&&(0,f.jsx)(V.p,{}),(0,f.jsx)(Q,{fullName:null!==(s=null===(a=e.dialog)||void 0===a?void 0:a.fullName)&&void 0!==s?s:"User",userId:null===(i=e.dialog)||void 0===i?void 0:i.userId}),(0,f.jsx)("div",{className:B,children:(0,f.jsx)(S,{messages:e.messages,userAvatar:(null===(r=e.dialog)||void 0===r?void 0:r.photos.small)||(null===(n=e.dialog)||void 0===n?void 0:n.photos.large)||k,authAvatar:(null===(d=e.profile)||void 0===d?void 0:d.photos.small)||(null===(t=e.profile)||void 0===t?void 0:t.photos.large)||k,authId:e.authId})}),(0,f.jsx)(W,{userName:null!==(l=null===(o=e.dialog)||void 0===o?void 0:o.fullName)&&void 0!==l?l:"User",senderName:null===(u=e.profile)||void 0===u?void 0:u.fullName,authId:e.authId,userId:null===(c=e.dialog)||void 0===c?void 0:c.userId,sendMessageToUser:e.sendMessageToUser})]})})),q="WithoutMessages_main__Vw4zd",z=function(e){return(0,f.jsx)("div",{className:q,children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0430\u0442"})},H=function(e){var s=e.dialogs.map((function(e){return(0,f.jsx)("li",{children:(0,f.jsx)(P,(0,i.Z)({},e))},e.id)}));return(0,f.jsxs)("div",{className:c,children:[(0,f.jsx)("div",{className:m+" "+(e.params.id?h:_),children:(0,f.jsx)(I,{dialogs:s})}),(0,f.jsx)("div",{className:g+" "+(e.params.id?p:v),children:e.params.id?(0,f.jsx)($,{}):(0,f.jsx)(z,{})})]})},K=a(7781),O=a(2791),R=a(4569),Y=a(7193),ee=a(6070),se=function(e){(0,l.Z)(a,e);var s=(0,o.Z)(a);function a(){return(0,d.Z)(this,a),s.apply(this,arguments)}return(0,t.Z)(a,[{key:"componentDidMount",value:function(){var e=(0,n.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.getDialogs(),this.props.params.id&&this.props.getMessages(this.props.params.id),e.next=4,this.props.getUser(this.props.authId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,s,a){e.params.id!==this.props.params.id&&this.props.params.id&&this.props.getMessages(this.props.params.id)}},{key:"render",value:function(){return this.props.isFetching?(0,f.jsx)(V.p,{}):(0,f.jsx)(H,(0,i.Z)({},this.props))}}]),a}(O.Component),ae=(0,K.qC)((0,u.$j)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages,authId:e.auth.id,isFetching:e.dialogsPage.isFetching}}),{getDialogs:T.kp,getMessages:T.GJ,getUser:ee.C4}),R.E,Y.D)(se)},8708:function(e,s,a){a.d(s,{J:function(){return h}});var i=a(5987),r="TextItem_item__lnLmw",n="TextItem_avatar__-D5fm",d="TextItem_text__I9BRV",t="TextItem_nameAndDate__SxWMt",l="TextItem_userName__InrHg",o="TextItem_postDate__uyFiT",u="TextItem_description__EuyTX",c="TextItem_noUser__FuXyC",m=a(4352),g=a(184),_=["noUser"],h=function(e){var s,a,h=e.noUser,v=(0,i.Z)(e,_);return v.addedDate&&(s=new Date(v.addedDate),a="".concat(s.getHours(),":").concat(s.getMinutes())),h?(0,g.jsx)("li",{children:(0,g.jsx)("div",{className:c,children:(0,g.jsx)("div",{className:u,children:v.message})})}):(0,g.jsx)("li",{children:(0,g.jsxs)("div",{className:r,children:[(0,g.jsx)("div",{className:n,children:(0,g.jsx)("img",{src:(null===v||void 0===v?void 0:v.avatar)||m,alt:""})}),(0,g.jsxs)("div",{className:d,children:[(0,g.jsxs)("div",{className:t,children:[(0,g.jsx)("span",{className:l,children:(null===v||void 0===v?void 0:v.name)||"Anonymous"})," ",(0,g.jsx)("span",{className:o,children:s?"".concat(s.toLocaleDateString()," ").concat(a):""})]}),(0,g.jsx)("div",{className:u,children:v.message})]})]})},v.id)}}}]);
//# sourceMappingURL=847.2eeed504.chunk.js.map